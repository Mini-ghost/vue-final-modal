{"version":3,"file":"VueFinalModal.umd.js","sources":["../lib/utils/focusTrap.js","../lib/utils/dom.js","../lib/VueFinalModal.vue","../node_modules/style-inject/dist/style-inject.es.js","../lib/ModalsContainer.vue","../lib/PluginCore.js","../lib/utils/array.js","../lib/utils/errors.js","../lib/Plugin.js"],"sourcesContent":["// stolen from vue-js-modal\n\nconst FOCUSABLE_ELEMENTS_QUERY =\n  'button:not([disabled]), ' +\n  'select:not([disabled]), ' +\n  'a[href]:not([disabled]), ' +\n  'area[href]:not([disabled]), ' +\n  '[contentEditable=\"\"]:not([disabled]), ' +\n  '[contentEditable=\"true\"]:not([disabled]), ' +\n  '[contentEditable=\"TRUE\"]:not([disabled]), ' +\n  'textarea:not([disabled]), ' +\n  'iframe:not([disabled]), ' +\n  'input:not([disabled]), ' +\n  'summary:not([disabled]), ' +\n  '[tabindex]:not([tabindex=\"-1\"])'\n\nconst isTabPressed = event => {\n  return event.key === 'Tab' || event.keyCode === 9\n}\n\nconst querySelectorAll = (element, selector) => {\n  return [...(element.querySelectorAll(selector) || [])]\n}\n\nconst queryFocusableElements = element => {\n  return querySelectorAll(element, FOCUSABLE_ELEMENTS_QUERY)\n}\n\nconst isFocused = element => {\n  return element == document.activeElement\n}\n\nconst isNothingFocused = () => {\n  return !document.activeElement\n}\n\nclass FocusTrap {\n  constructor() {\n    this.root = null\n    this.elements = []\n\n    this.onKeyDown = this.onKeyDown.bind(this)\n    this.enable = this.enable.bind(this)\n    this.disable = this.disable.bind(this)\n    this.firstElement = this.firstElement.bind(this)\n    this.lastElement = this.lastElement.bind(this)\n  }\n\n  lastElement() {\n    return this.elements[this.elements.length - 1] || null\n  }\n\n  firstElement() {\n    return this.elements[0] || null\n  }\n\n  onKeyDown(event) {\n    if (!isTabPressed(event)) {\n      return\n    }\n\n    // SHIFT + TAB\n    if (event.shiftKey) {\n      if (isFocused(this.firstElement())) {\n        this.lastElement().focus()\n        event.preventDefault()\n      }\n      return\n    }\n\n    // TAB\n    if (isNothingFocused() || isFocused(this.lastElement())) {\n      this.firstElement().focus()\n      event.preventDefault()\n      return\n    }\n  }\n\n  enabled() {\n    return !!this.root\n  }\n\n  enable(root) {\n    if (!root) {\n      return\n    }\n\n    this.root = root\n    this.elements = queryFocusableElements(this.root)\n\n    this.root.addEventListener('keydown', this.onKeyDown)\n  }\n\n  disable() {\n    this.root.removeEventListener('keydown', this.onKeyDown)\n    this.root = null\n  }\n}\n\nexport default FocusTrap\n","// Stolen from bootstrap vue\n\n// Determine if an element is an HTML element\nexport const isElement = el => !!(el && el.nodeType === Node.ELEMENT_NODE)\n\n// Set an style property on an element\nexport const setStyle = (el, prop, value) => {\n  if (prop && isElement(el)) {\n    el.style[prop] = value\n  }\n}\n\n// Remove an style property from an element\nexport const removeStyle = (el, prop) => {\n  if (prop && isElement(el)) {\n    el.style[prop] = ''\n  }\n}\n","<template>\n  <div\n    v-if=\"ssr || visible\"\n    v-show=\"!ssr || visible\"\n    ref=\"root\"\n    :style=\"{ zIndex: calculateZIndex }\"\n    class=\"vfm vfm--inset\"\n    :class=\"[attach === false ? 'vfm--fixed' : 'vfm--absolute', { 'vfm--prevent-none': preventClick }]\"\n    @keydown=\"onEsc\"\n  >\n    <transition\n      :name=\"overlayTransition\"\n      @before-enter=\"beforeOverlayEnter\"\n      @after-enter=\"afterOverlayEnter\"\n      @before-leave=\"beforeOverlayLeave\"\n      @after-leave=\"afterOverlayLeave\"\n    >\n      <div\n        v-show=\"!hideOverlay && visibility.overlay\"\n        class=\"vfm__overlay vfm--overlay vfm--absolute vfm--inset\"\n        :class=\"overlayClass\"\n        :style=\"overlayStyle\"\n      ></div>\n    </transition>\n    <transition\n      :name=\"transition\"\n      @before-enter=\"beforeModalEnter\"\n      @after-enter=\"afterModalEnter\"\n      @before-leave=\"beforeModalLeave\"\n      @after-leave=\"afterModalLeave\"\n    >\n      <div\n        v-show=\"visibility.modal\"\n        ref=\"vfmContainer\"\n        class=\"vfm__container vfm--absolute vfm--inset vfm--outline-none\"\n        :class=\"classes\"\n        :style=\"styles\"\n        :aria-expanded=\"visibility.modal.toString()\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n        tabindex=\"-1\"\n        @click=\"onClickContainer\"\n      >\n        <div\n          ref=\"vfmContent\"\n          class=\"vfm__content\"\n          :class=\"[contentClass, { 'vfm--prevent-auto': preventClick }]\"\n          :style=\"contentStyle\"\n          @click.stop\n        >\n          <slot />\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport { ref, reactive, onMounted, onBeforeUnmount, computed, nextTick, watch, inject } from 'vue'\nimport FocusTrap from './utils/focusTrap.js'\nimport { setStyle, removeStyle } from './utils/dom.js'\n\nconst TransitionState = {\n  Enter: 'enter',\n  Entering: 'entering',\n  Leave: 'leave',\n  Leaving: 'leavng'\n}\n\nexport default {\n  props: {\n    name: { type: String, default: null },\n    modelValue: { type: Boolean, default: false },\n    ssr: { type: Boolean, default: true },\n    classes: { type: [String, Object, Array], default: '' },\n    overlayClass: { type: [String, Object, Array], default: '' },\n    contentClass: { type: [String, Object, Array], default: '' },\n    styles: { type: [String, Object, Array], default: '' },\n    overlayStyle: { type: [String, Object, Array], default: '' },\n    contentStyle: { type: [String, Object, Array], default: '' },\n    lockScroll: { type: Boolean, default: true },\n    hideOverlay: { type: Boolean, default: false },\n    clickToClose: { type: Boolean, default: true },\n    escToClose: { type: Boolean, default: false },\n    preventClick: { type: Boolean, default: false },\n    attach: {\n      type: null,\n      default: false,\n      validator(val) {\n        const type = typeof val\n\n        if (type === 'boolean' || type === 'string') return true\n\n        return val.nodeType === Node.ELEMENT_NODE\n      }\n    },\n    transition: { type: String, default: 'vfm' },\n    overlayTransition: { type: String, default: 'vfm' },\n    zIndexBase: { type: [String, Number], default: 1000 },\n    zIndex: { type: [Boolean, String, Number], default: false },\n    focusRetain: { type: Boolean, default: true },\n    focusTrap: { type: Boolean, default: false }\n  },\n  emits: ['update:modelValue', 'click-outside', 'before-open', 'opened', 'before-close', 'closed'],\n  setup(props, { emit }) {\n    const uid = Symbol('vfm')\n    const root = ref(null)\n    const vfmContent = ref(null)\n    const vfmContainer = ref(null)\n\n    const $vfm = inject(props._options.key)\n\n    const modalStackIndex = ref(null)\n    const $focusTrap = new FocusTrap()\n\n    const visible = ref(false)\n    const visibility = reactive({\n      modal: false,\n      overlay: false\n    })\n    const overlayTransitionState = ref(null)\n    const modalTransitionState = ref(null)\n\n    const isComponentReadyToBeDestroyed = computed(() => {\n      return (\n        (props.hideOverlay || overlayTransitionState.value === TransitionState.Leave) &&\n        modalTransitionState.value === TransitionState.Leave\n      )\n    })\n\n    const calculateZIndex = computed(() => {\n      if (typeof props.zIndex === 'boolean') {\n        if (props.attach) {\n          return 'unset'\n        } else {\n          return props.zIndexBase + 2 * (modalStackIndex.value || 0)\n        }\n      } else {\n        return props.zIndex\n      }\n    })\n\n    watch(\n      () => props.modelValue,\n      value => {\n        mounted()\n        if (!value) {\n          close()\n        }\n      }\n    )\n    watch(() => props.lockScroll, handleLockScroll)\n    watch(\n      () => props.hideOverlay,\n      value => {\n        if (props.modelValue && !value) {\n          visibility.overlay = true\n        }\n      }\n    )\n    watch(() => props.attach, mounted)\n    watch(\n      isComponentReadyToBeDestroyed,\n      val => {\n        if (val) {\n          visible.value = false\n        }\n      },\n      {\n        flush: 'post'\n      }\n    )\n\n    $vfm.modals.push(getModalInfo())\n\n    onMounted(() => {\n      mounted()\n    })\n    onBeforeUnmount(() => {\n      close()\n      root.value.remove()\n\n      let index = $vfm.modals.findIndex(vm => vm.uid === uid)\n      $vfm.modals.splice(index, 1)\n    })\n    function getModalInfo() {\n      return {\n        uid,\n        name: props.name,\n        modelValue: props.modelValue,\n        emit,\n        vfmContainer,\n        vfmContent,\n        getAttachElement,\n        modalStackIndex,\n        visibility,\n        handleLockScroll,\n        hideOverlay: props.hideOverlay,\n        focusRetain: props.focusRetain,\n        focusTrap: props.focusTrap,\n        $focusTrap\n      }\n    }\n    function mounted() {\n      if (props.modelValue) {\n        let target = getAttachElement()\n        if (target || props.attach === false) {\n          props.attach !== false && target.appendChild(root.value)\n          let index = $vfm.openedModals.findIndex(vm => vm.uid === uid)\n\n          if (index !== -1) {\n            // if this is already exist in modalStack, delete it\n            $vfm.openedModals.splice(index, 1)\n          }\n          $vfm.openedModals.push(getModalInfo())\n          modalStackIndex.value = $vfm.openedModals.length - 1\n\n          handleLockScroll()\n\n          $vfm.openedModals\n            .filter(vm => vm.uid !== uid)\n            .forEach((vm, index) => {\n              if (vm.getAttachElement() === target) {\n                // if vm and this have the same attach element\n                vm.modalStackIndex.value = index\n                vm.visibility.overlay = false\n              }\n            })\n\n          visible.value = true\n          nextTick(() => {\n            startTransitionEnter()\n          })\n        } else if (target !== false) {\n          console.warn('Unable to locate target '.concat(props.attach))\n        }\n      }\n    }\n    function close() {\n      let index = $vfm.openedModals.findIndex(vm => vm.uid === uid)\n      if (index !== -1) {\n        // remove this in modalStack\n        $vfm.openedModals.splice(index, 1)\n      }\n      if ($vfm.openedModals.length > 0) {\n        // If there are still nested modals opened\n        const $_vm = $vfm.openedModals[$vfm.openedModals.length - 1]\n        $_vm.handleLockScroll()\n        $_vm.focusTrap && $_vm.$focusTrap.firstElement()?.focus()\n        if ($_vm.focusRetain || $_vm.focusTrap) {\n          $_vm.vfmContainer.value.focus()\n        }\n        !$_vm.hideOverlay && ($_vm.visibility.overlay = true)\n      }\n      startTransitionLeave()\n    }\n    function handleLockScroll() {\n      if (props.modelValue) {\n        props.lockScroll ? setStyle(document.body, 'overflow', 'hidden') : removeStyle(document.body, 'overflow')\n      }\n    }\n    function getAttachElement() {\n      let target\n      if (props.attach === false) {\n        target = false\n      } else if (typeof props.attach === 'string') {\n        // CSS selector\n        if (window) {\n          target = window.document.querySelector(props.attach)\n        } else {\n          target = false\n        }\n      } else {\n        // DOM Element\n        target = props.attach\n      }\n      return target\n    }\n    function startTransitionEnter() {\n      visibility.overlay = true\n      visibility.modal = true\n    }\n    function startTransitionLeave() {\n      visibility.overlay = false\n      visibility.modal = false\n    }\n\n    function beforeOverlayEnter() {\n      overlayTransitionState.value = TransitionState.Entering\n    }\n    function afterOverlayEnter() {\n      overlayTransitionState.value = TransitionState.Enter\n    }\n    function beforeOverlayLeave() {\n      overlayTransitionState.value = TransitionState.Leaving\n    }\n    function afterOverlayLeave() {\n      overlayTransitionState.value = TransitionState.Leave\n    }\n    function beforeModalEnter() {\n      emit('before-open')\n      modalTransitionState.value = TransitionState.Entering\n    }\n    function afterModalEnter() {\n      modalTransitionState.value = TransitionState.Enter\n      if (props.focusRetain || props.focusTrap) {\n        vfmContainer.value.focus()\n      }\n      if (props.focusTrap) {\n        $focusTrap.enable(vfmContainer.value)\n      }\n      emit('opened')\n    }\n    function beforeModalLeave() {\n      emit('before-close')\n      modalTransitionState.value = TransitionState.Leaving\n\n      if ($focusTrap.enabled()) {\n        $focusTrap.disable()\n      }\n    }\n    function afterModalLeave() {\n      modalTransitionState.value = TransitionState.Leave\n      modalStackIndex.value = null\n      if ($vfm.openedModals.length === 0) {\n        props.lockScroll && removeStyle(document.body, 'overflow')\n      }\n      emit('closed')\n    }\n    function onClickContainer() {\n      emit('click-outside')\n      props.clickToClose && emit('update:modelValue', false)\n    }\n    function onEsc(evt) {\n      if (evt.keyCode === 27 && visible.value && props.escToClose) {\n        emit('update:modelValue', false)\n      }\n    }\n    return {\n      root,\n      vfmContent,\n      vfmContainer,\n      visible,\n      visibility,\n      calculateZIndex,\n      beforeOverlayEnter,\n      afterOverlayEnter,\n      beforeOverlayLeave,\n      afterOverlayLeave,\n      beforeModalEnter,\n      afterModalEnter,\n      beforeModalLeave,\n      afterModalLeave,\n      onClickContainer,\n      onEsc\n    }\n  }\n}\n</script>\n\n<style lang=\"css\" scoped>\n.vfm--fixed {\n  position: fixed;\n}\n.vfm--absolute {\n  position: absolute;\n}\n.vfm--inset {\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.vfm--overlay {\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.vfm--prevent-none {\n  pointer-events: none;\n}\n.vfm--prevent-auto {\n  pointer-events: auto;\n}\n.vfm--outline-none:focus {\n  outline: none;\n}\n.vfm-enter-active,\n.vfm-leave-active {\n  transition: opacity 0.2s;\n}\n.vfm-enter-from,\n.vfm-leave-to {\n  opacity: 0;\n}\n</style>\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","<template>\n  <div class=\"modals-container\">\n    <component\n      :is=\"modal.component\"\n      v-for=\"(modal, index) in dynamicModals\"\n      :key=\"modal.id\"\n      v-model=\"modal.value\"\n      v-bind=\"modal.bind\"\n      v-on=\"modal.on\"\n      @closed=\"slice(index)\"\n    >\n      <template v-for=\"(slot, key) in modal.slots\" :key=\"key\" #[key]>\n        <component :is=\"slot.component\" v-bind=\"slot.bind\" />\n      </template>\n    </component>\n  </div>\n</template>\n\n<script>\nimport { inject } from 'vue'\n\nexport default {\n  props: {},\n  setup(props) {\n    const $vfm = inject(props._options.key)\n\n    return {\n      dynamicModals: $vfm.dynamicModals,\n      slice(index) {\n        $vfm.dynamicModals.splice(index, 1)\n      }\n    }\n  }\n}\n</script>\n","import { ref, reactive, shallowRef } from 'vue'\nimport { findRight } from './utils/array'\nimport VueFinalModal from './VueFinalModal.vue'\nimport ModalsContainer from './ModalsContainer.vue'\n\nfunction assignOptions(component, options) {\n  Object.assign(component.props, {\n    _options: { default: () => options }\n  })\n  return component\n}\n\nfunction createVfm(options) {\n  let vfm\n  const PREFIX = '_dynamic_modal_'\n  const generateId = ((index = 0) => () => (index++).toString())()\n\n  return function() {\n    vfm = {\n      openedModals: [],\n      modals: [],\n      dynamicModals: reactive([]),\n      show(modal) {\n        switch (typeof modal) {\n          case 'string':\n            this.toggle(modal, true)\n            break\n          case 'object':\n            const defaultModal = {\n              component: options.componentName,\n              props: {},\n              slots: {},\n              events: {}\n            }\n            modal = Object.assign(defaultModal, modal)\n            const id = generateId()\n            const name = modal.bind.name || PREFIX + id\n            this.dynamicModals.push({\n              value: ref(true),\n              id,\n              ...modal,\n              component: shallowRef(modal.component),\n              slots: shallowRef(modal.slots),\n              bind: { ...modal.bind, name }\n            })\n            break\n        }\n      },\n      hide(name) {\n        this.toggle(name, false)\n      },\n      hideAll() {\n        for (let i = this.openedModals.length - 1; i >= 0; i--) {\n          this.openedModals[i].emit('update:modelValue', false)\n        }\n      },\n      toggle(name, show) {\n        const modal = findRight(this.modals, modal => modal.name === name)\n        if (modal !== undefined) {\n          modal.emit('update:modelValue', show === undefined ? !modal.modelValue : show)\n        }\n      }\n    }\n    return vfm\n  }\n}\n\nexport function bindPrototype(app, options) {\n  const vfm = createVfm(options)()\n  Object.defineProperty(app.config.globalProperties, options.key, {\n    get() {\n      return vfm\n    }\n  })\n  app.provide(options.key, vfm)\n}\n\nexport function registModal(app, options) {\n  app.component(options.componentName, assignOptions(VueFinalModal, options))\n}\n\nexport function registContainer(app, options) {\n  app.component(options.dynamicContainerName, assignOptions(ModalsContainer, options))\n}\n","export function findRight(arr, callback) {\n  for (let i = arr.length - 1; i >= 0; i--) {\n    if (callback(arr[i], i)) {\n      return arr[i]\n    }\n  }\n  return undefined\n}\n","export const DUPLICATE_PLUGIN_COMPONENT =\n  '[vue-final-modal] Duplicate registration API key and componentName of VueFinalModal.'\n\nexport const DUPLICATE_COMPONENT = '[vue-final-modal] Duplicate registration componentName of VueFinalModal.'\n\nexport const DUPLICATE_DYNAMIC_CONTAINER =\n  '[vue-final-modal] Duplicate registration dynamicContainerName of ModalsContainer.'\n","import { bindPrototype, registModal, registContainer } from './PluginCore'\nimport { DUPLICATE_PLUGIN_COMPONENT, DUPLICATE_COMPONENT, DUPLICATE_DYNAMIC_CONTAINER } from './utils/errors'\n\nconst defaultOptions = {\n  componentName: 'VueFinalModal',\n  key: '$vfm',\n  dynamicContainerName: 'ModalsContainer'\n}\n\nconst Plugin = () => ({\n  install(app, options) {\n    const _options = Object.assign({}, defaultOptions, options)\n    const isDuplicateKey = app.config.globalProperties[_options.key]\n    const isDuplicateComponent = app._context.components[_options.componentName]\n    const isDuplicateDynamicContainer = app._context.components[_options.dynamicContainerName]\n\n    if (isDuplicateComponent || isDuplicateDynamicContainer) {\n      if (isDuplicateKey) {\n        console.error(DUPLICATE_PLUGIN_COMPONENT)\n      }\n      if (isDuplicateComponent) {\n        console.error(DUPLICATE_COMPONENT)\n      }\n      if (isDuplicateDynamicContainer) {\n        console.error(DUPLICATE_DYNAMIC_CONTAINER)\n      }\n    } else {\n      if (!isDuplicateKey) {\n        bindPrototype(app, _options)\n      }\n      registModal(app, _options)\n      registContainer(app, _options)\n    }\n  }\n})\n\nexport default Plugin\n"],"names":["queryFocusableElements","element","selector","querySelectorAll","isFocused","document","activeElement","FocusTrap","root","elements","onKeyDown","this","bind","enable","disable","firstElement","lastElement","length","event","key","keyCode","isTabPressed","shiftKey","focus","preventDefault","addEventListener","removeEventListener","isElement","el","nodeType","Node","ELEMENT_NODE","removeStyle","prop","style","TransitionState","props","name","type","String","default","modelValue","Boolean","ssr","classes","Object","Array","overlayClass","contentClass","styles","overlayStyle","contentStyle","lockScroll","hideOverlay","clickToClose","escToClose","preventClick","attach","validator","val","transition","overlayTransition","zIndexBase","Number","zIndex","focusRetain","focusTrap","emits","setup","emit","uid","Symbol","ref","vfmContent","vfmContainer","$vfm","inject","_options","modalStackIndex","$focusTrap","visible","visibility","reactive","modal","overlay","overlayTransitionState","modalTransitionState","isComponentReadyToBeDestroyed","computed","value","calculateZIndex","getModalInfo","getAttachElement","handleLockScroll","mounted","target","appendChild","index","openedModals","findIndex","vm","splice","push","filter","forEach","nextTick","console","warn","concat","close","$_vm","_$_vm$$focusTrap$firs","body","window","querySelector","watch","flush","modals","onMounted","onBeforeUnmount","remove","beforeOverlayEnter","afterOverlayEnter","beforeOverlayLeave","afterOverlayLeave","beforeModalEnter","afterModalEnter","beforeModalLeave","enabled","afterModalLeave","onClickContainer","onEsc","evt","$props","$setup","_createBlock","class","onKeydown","_createVNode","onBefore-enter","onAfter-enter","onBefore-leave","onAfter-leave","aria-expanded","toString","role","aria-modal","tabindex","onClick","_renderSlot","css","insertAt","head","getElementsByTagName","createElement","firstChild","insertBefore","styleSheet","cssText","createTextNode","dynamicModals","slice","assignOptions","component","options","assign","bindPrototype","app","vfm","generateId","show","toggle","defaultModal","componentName","slots","events","id","shallowRef","hide","hideAll","i","arr","callback","findRight","undefined","createVfm","defineProperty","config","globalProperties","get","provide","_hoisted_1","_mergeProps","_toHandlers","on","onClosed","slot","defaultOptions","dynamicContainerName","install","isDuplicateKey","isDuplicateComponent","_context","components","isDuplicateDynamicContainer","error","VueFinalModal","registModal","ModalsContainer","registContainer"],"mappings":"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"}